<div id="m_sec1" class="py-40 max-xl:py-28 max-lg:py-20 bg-base">
    <div class="container">
        <div class="flex flex-wrap justify-between">
            <div class="w-4/12 pr-[20px] max-lg:w-full max-lg:pl-0 max-lg:pr-[20px] max-md:pr-2">
                <div class="flex justify-end mb-[1.3rem]"><a href="/html/intro.php" class="moreBtn">View more</a></div>
                <div class="mt-[1.3rem] py-[2.7rem] 2xl:py-10 px-[1.5rem] border border-[#ddd] max-xl:py-8 bg-cover bg-right-bottom bg-white bg-mainintro bg-no-repeat h-intcalc 2xl:bg-mainintro2 2xl:bg-auto">
                <h4 class="tit5 text-white mb-[-1em] 2xl:text-black 2xl:mb-[1.38em]">인사말</h4>
                <div class="pl-[50%] flex flex-col justify-center h-full tracking-tight flex-wrap text-right 2xl:pl-0  2xl:h-auto">
                    <p class="h-[1.4rem] mb-[1.4em] mt-[-6em] 2xl:mt-0 2xl:order-3 2xl:mt-[3em]"><img class="inline-block h-full" src="{{asset('storage/company/logo_small_black.png')}}" alt="한국전문신문협회"></p>
                    <p class="font-titleO leading-[1.5] mb-[1em] text-[1.6rem]">더 나은 협회와 <br>회사를 만드는데 최선의 <br>노력을 기울이겠습니다.</p>
                    <p class="font-score leading-[1.5] tracking-tighter">우리 협회는 능동적인 자세와 <br class="2xl:hidden">진취적인 각오로 스스로 전문신문의 <br class="2xl:hidden">위상을 높이고 사회적 책임과 사명을 <br class="2xl:hidden">다할 수 있도록 노력하겠습니다.</p>
                </div>
            </div>
        </div>
        <div class="w-4/12 px-2 max-lg:w-6/12 max-lg:pl-0 max-lg:pr-[20px] max-md:pr-2">
            <div class="flex justify-end mb-[1.3rem]"><a href="/html/notice.php" class="moreBtn">View more</a></div>
                <div class="mt-[1.3rem] bg-white py-[2.7rem] 2xl:py-10 px-[1.8rem] border border-[#ddd] max-xl:py-8 h-intcalc">
                <h4 class="tit5">공지사항</h4>
                <ul class="font-bold more2box">
                    <li class="mb-[1em]">
                        <a href="" class="flex items-center bggrizzle-200py-[1.3em] px-[0.8em] 2xl:py-[1em] max-lg:pl-2">
                            <span class="font-titleO text-point-400 block w-[5.5em] border-r border-[#ccc]">24.05.16</span>
                            <span class="txtOver1 block w-calc1 px-[1.3em] max-xl:px-[0.8em] max-xl:w-calc6">2023년도 전문신문 발전 유공 포상 후보자 추천 공고2023년도 전문신문 발전 유공 포상 후보자 추천 공고</span>
                            <span class="material-symbols-rounded moreBtn2">add</span>
                        </a>
                    </li>
                    <li class="mb-[1em]">
                        <a href="" class="flex items-center bggrizzle-200py-[1.3em] px-[0.8em] 2xl:py-[1em]">
                            <span class="font-titleO text-point-400 block w-[5.5em] border-r border-[#ccc]">24.05.16</span>
                            <span class="txtOver1 block w-calc1 px-[1.3em] max-xl:px-[0.8em] max-xl:w-calc6">2023년도 전문신문 발전 유공 포상 후보자 추천 공고2023년도 전문신문 발전 유공 포상 후보자 추천 공고</span>
                            <span class="material-symbols-rounded moreBtn2">add</span>
                        </a>
                    </li>
                    <li class="mb-[1em]">
                        <a href="" class="flex items-center bggrizzle-200py-[1.3em] px-[0.8em] 2xl:py-[1em]">
                            <span class="font-titleO text-point-400 block w-[5.5em] border-r border-[#ccc]">24.05.16</span>
                            <span class="txtOver1 block w-calc1 px-[1.3em] max-xl:px-[0.8em] max-xl:w-calc6">2023년도 전문신문 발전 유공 포상 후보자 추천 공고2023년도 전문신문 발전 유공 포상 후보자 추천 공고</span>
                            <span class="material-symbols-rounded moreBtn2">add</span>
                        </a>
                    </li>
                    <li class="mb-[1em]">
                        <a href="" class="flex items-center bggrizzle-200py-[1.3em] px-[0.8em] 2xl:py-[1em]">
                            <span class="font-titleO text-point-400 block w-[5.5em] border-r border-[#ccc]">24.05.16</span>
                            <span class="txtOver1 block w-calc1 px-[1.3em] max-xl:px-[0.8em] max-xl:w-calc6">2023년도 전문신문 발전 유공 포상 후보자 추천 공고2023년도 전문신문 발전 유공 포상 후보자 추천 공고</span>
                            <span class="material-symbols-rounded moreBtn2">add</span>
                        </a>
                    </li>
                    <li class="">
                        <a href="" class="flex items-center bggrizzle-200py-[1.3em] px-[0.8em] 2xl:py-[1em]">
                            <span class="font-titleO text-point-400 block w-[5.5em] border-r border-[#ccc]">24.05.16</span>
                            <span class="txtOver1 block w-calc1 px-[1.3em] max-xl:px-[0.8em] max-xl:w-calc6">2023년도 전문신문 발전 유공 포상 후보자 추천 공고2023년도 전문신문 발전 유공 포상 후보자 추천 공고</span>
                            <span class="material-symbols-rounded moreBtn2">add</span>
                        </a>
                    </li>
                </ul>
                </div>
            </div>
            <div class="w-4/12 pl-[20px] max-lg:w-6/12">
                <div class="flex justify-end mb-[1.3rem]"><a href="/html/schedule.php" class="moreBtn">View more</a></div>
                <div class="mt-[1.3rem] bg-white py-[2.7rem] 2xl:py-10 px-[1.8rem] border border-[#ddd] max-xl:py-8 h-intcalc">
                    <h4 class="tit5">행사일정</h4>
                    <div 
                        class="" 
                        x-data="{
                            days:['일', '월', '화', '수', '목', '금', '토'],
                            currentMonth: (new Date()).getMonth(),
                            currentYear: (new Date()).getFullYear(),
                            events: @entangle('events'),
                            weeks: [],
                            generateCalendar() {
                                const today = new Date();
                                const startOfMonth = new Date(this.currentYear, this.currentMonth, 1);
                                const endOfMonth = new Date(this.currentYear, this.currentMonth + 1, 0);
                                const numDays = endOfMonth.getDate();
                                const startDay = startOfMonth.getDay();
                                const eventArray = [];
                                for (let i = 0; i < this.events.length; i++) {
                                    eventArray.push({ date: new Date(this.events[i]['date']) });
                                }
                                this.weeks = [];
                                let week = [];
                                for (let i = 0; i < startDay; i++) {
                                    week.push({ date: '', isToday: false, isEvent: false });
                                }
                                for (let i = 1; i <= numDays; i++) {
                                    const date = new Date(this.currentYear, this.currentMonth, i);
                                    const isToday = date.toDateString() === today.toDateString();
                                    const isEvent = eventArray.some(event => event.date.toDateString() === date.toDateString());

                                    week.push({
                                        date: i,
                                        isToday: isToday,
                                        isEvent: isEvent
                                    });

                                    if (week.length === 7) {
                                        this.weeks.push(week);
                                        week = [];
                                    }
                                }
                                while (week.length < 7) {
                                    week.push({ date: '', isToday: false, isEvent: false });
                                }
                                if (week.length > 0) {
                                    this.weeks.push(week);
                                }
                            },
                            nextMonth() {
                                if (this.currentMonth === 11) {
                                    this.currentMonth = 0;
                                    this.currentYear++;
                                } else {
                                    this.currentMonth++;
                                }
                                $wire.getDaysOfMonth(this.currentYear, this.currentMonth+1).then(() => {
                                    this.generateCalendar();
                                });
                            },
                            prevMonth() {
                                if (this.currentMonth === 0) {
                                    this.currentMonth = 11;
                                    this.currentYear--;
                                } else {
                                    this.currentMonth--;
                                }
                                $wire.getDaysOfMonth(this.currentYear, this.currentMonth+1).then(() => {
                                    this.generateCalendar();
                                });
                            }
                        }" 
                        x-init="generateCalendar()"
                    >
                        <div class="w-full overflow-hidden rounded-lg shadow-lg font-montH">
                            <div class="bg-white">
                                <div class="flex items-center px-4 bg-[#231f20] text-white text-[1.8em] py-[0.4em] justify-center">
                                    <button aria-label="calendar backward" class="" @click="prevMonth">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <polyline points="15 6 9 12 15 18" />
                                        </svg>
                                    </button>
                                    <span tabindex="0" class="px-[0.8em]"><b x-text="currentYear"></b><span class="font-montL" x-text="'.'+('0' + (currentMonth+1)).slice(-2)"></span></span>
                                    <button aria-label="calendar forward" class="" @click="nextMonth">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <polyline points="9 6 15 12 9 18" />
                                        </svg>
                                    </button>
                                </div>
                                <div class="flex items-center justify-between pt-8 pb-4 overflow-x-auto text-center">
                                    <table class="table-auto w-full">
                                        <thead class="font-titleO">
                                            <tr>
                                                <template x-for="day,i in days">
                                                    <th>
                                                        <div class="flex justify-center w-full">
                                                            <p class="" :class="i == 0 ? 'text-point-200' : i == 6 ? 'text-point-200' : ''" x-text="day"></p>
                                                        </div>
                                                    </th>    
                                                </template>
                                            </tr>
                                        </thead>
                                        <tbody class="leading-[2] 2xl:leading-[1.5]">
                                            <template x-for="week in weeks">
                                                <tr>
                                                    <template x-for="(day,index) in week">
                                                        <td class="pt-4">
                                                            <template x-if="day.isEvent">
                                                                <div class="flex justify-center w-full px-2 py-2">
                                                                    <a href="{{route('events.schedules')}}" class="flex items-center justify-center w-8 h-8 text-white rounded-full shadow-sh1 bg-bb focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#555] focus:bg-grizzle-800 hover:bg-grizzle-800" x-text="day.date"></a>
                                                                </div>
                                                            </template>
                                                            <template x-if="!day.isEvent">
                                                                <div class="flex justify-center w-full px-2 py-2">
                                                                    <span :class="{'text-point-200': index%7 === 0 || index%7 === 6}" x-text="day.date"></span>
                                                                </div>
                                                            </template>
                                                        </td>
                                                    </template>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>